<app-dt-header [dtHeaderConfig]="dtHeaderConfig" (action)="dtActionHandler($event)"></app-dt-header>
<div class="card card-stats desktop-only">
    <div class="card-body datatable p-0">
        <div ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs" (activeIdChange)="tabChange($event)">
            <div [ngbNavItem]="1">
                <a ngbNavLink>All Inventory</a>
                <ng-template ngbNavContent>
                    <ngx-datatable class="material" [rows]="rows" [columns]="columns" [columnMode]="'force'"
                        [headerHeight]="50" [rowHeight]="'auto'" [footerHeight]="50" [scrollbarH]="true"
                        [externalPaging]="true" [externalSorting]="false" [limit]="pagePayload.limit"
                        [offset]="pagePayload.page - 1" [rowIdentity]="getId" [count]="count"
                        (page)="onPageChange($event)">
                    </ngx-datatable>
                    <ng-template #snoR let-row="row" let-value="value" let-rowIndex="rowIndex">{{ rowIndex + 1 }}
                    </ng-template>
                    <ng-template #actionR let-row="row" let-value="value" let-i="index">
                        <button class="btn admin_small_btn" (click)="rowAction('view', row)" data-toggle="tooltip"
                            data-placement="bottom" title="View Product">
                            <i class="fa fa-eye"></i>
                        </button>
                    </ng-template>
                    <ng-template #statusR let-row="row" let-value="value" let-rowIndex="rowIndex">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" [checked]="row.is_outofstock" class="custom-control-input" [id]="'status' + row.id" (click)="statusChange($event, row, rowIndex)">
                            <label class="custom-control-label" [for]="'status' + row.id"></label>
                        </div>
                    </ng-template>
                </ng-template>
            </div>
            <div [ngbNavItem]="2">
                <a ngbNavLink>Active</a>
                <ng-template ngbNavContent>
                    <ngx-datatable class="material" [rows]="rows" [columns]="columns" [columnMode]="'force'"
                        [headerHeight]="50" [rowHeight]="'auto'" [footerHeight]="50" [scrollbarH]="true"
                        [externalPaging]="true" [externalSorting]="false" [limit]="pagePayload.limit" [count]="count"
                        [offset]="pagePayload.page - 1" [rowIdentity]="getId" (page)="onPageChange($event)">
                    </ngx-datatable>
                    <ng-template #snoR let-row="row" let-value="value" let-rowIndex="rowIndex">{{ rowIndex + 1 }}
                    </ng-template>
                    <ng-template #actionR let-row="row" let-value="value" let-i="index">
                        <button class="btn admin_small_btn" (click)="rowAction('view', row)" data-toggle="tooltip"
                            data-placement="bottom" title="View Product">
                            <i class="fa fa-eye"></i>
                        </button>
                    </ng-template>
                    <ng-template #statusR let-row="row" let-value="value" let-rowIndex="rowIndex">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" [checked]="row.is_outofstock" class="custom-control-input" [id]="'statusActive' + row.id" (click)="statusChange($event, row, rowIndex)">
                            <label class="custom-control-label" [for]="'statusActive' + row.id"></label>
                        </div>
                    </ng-template>
                </ng-template>
            </div>
            <div [ngbNavItem]="3">
                <a ngbNavLink>Inactive</a>
                <ng-template ngbNavContent>
                    <ngx-datatable class="material" [rows]="rows" [columns]="columns" [columnMode]="'force'"
                        [rowIdentity]="getId" [headerHeight]="50" [rowHeight]="'auto'" [footerHeight]="50"
                        [scrollbarH]="true" [externalPaging]="true" [externalSorting]="false"
                        [limit]="pagePayload.limit" [count]="count" [offset]="pagePayload.page - 1"
                        (page)="onPageChange($event)">
                    </ngx-datatable>
                    <ng-template #snoR let-row="row" let-value="value" let-rowIndex="rowIndex">{{ rowIndex + 1 }}
                    </ng-template>
                    <ng-template #actionR let-row="row" let-value="value" let-i="index">
                        <button class="btn admin_small_btn" (click)="rowAction('view', row)" data-toggle="tooltip"
                            data-placement="bottom" title="View Product">
                            <i class="fa fa-eye"></i>
                        </button>
                    </ng-template>
                    <ng-template #statusR let-row="row" let-value="value" let-rowIndex="rowIndex">
                        <div class="custom-control custom-switch">
                            <input type="checkbox" [checked]="row.is_outofstock" class="custom-control-input" [id]="'statusInactive' + row.id" (click)="statusChange($event, row, rowIndex)">
                            <label class="custom-control-label" [for]="'statusInactive' + row.id"></label>
                        </div>
                    </ng-template>
                </ng-template>
            </div>
        </div>
        <div [ngbNavOutlet]="nav" class="mt-2"></div>
    </div>
</div>

<div class="datatable mobile-only">
	<div ngbNav #nav="ngbNav" [(activeId)]="active" class="nav-tabs" (activeIdChange)="tabChange($event)">
		<div [ngbNavItem]="1">
			<a ngbNavLink>Latest</a>
		</div>
		<div [ngbNavItem]="2">
			<a ngbNavLink>Active</a>
		</div>
		<div [ngbNavItem]="3">
			<a ngbNavLink>Inactive</a>
		</div>
	</div>
	<ng-container *ngFor="let product of rows; let i = index">
		<app-table-card [mobileViewColumns]="mobileViewColumns" [rows]="product" [mobileViewActions]="mobileViewActions" [rowIndex]="i"
			(action)="childActionHandler($event)">
		</app-table-card>
	</ng-container>
	<datatable-pager *ngIf="isDataLoaded && rows.length" [pagerLeftArrowIcon]="'datatable-icon-left'" [pagerRightArrowIcon]="'datatable-icon-right'"
		[pagerPreviousIcon]="'datatable-icon-prev'" [pagerNextIcon]="'datatable-icon-skip'" [page]="pagePayload.page"
		[size]="pagePayload.limit" [count]="count" (change)="onPageChange($event)">
	</datatable-pager>
</div>